<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Présentation – 20 janvier</title>
  <style>
    html, body { height: 100%; margin: 0; background:#000; color:#fff; font-family: Arial, sans-serif; }
    .slide { display:none; height:100vh; width:100vw; align-items:center; justify-content:center; position:relative; }
    .slide.active { display:flex; }

    img { max-width:100vw; max-height:100vh; object-fit:contain; }
    video { max-width:100vw; max-height:100vh; object-fit:contain; background:#000; }
    iframe { width:100vw; height:100vh; border:0; background:#000; }

    /* HUD discret */
    .hud{
      position:fixed; left:12px; bottom:10px; z-index:9999;
      background:rgba(0,0,0,.45); padding:8px 10px; border-radius:10px;
      font-size:14px; display:flex; gap:10px; align-items:center;
    }
    .hud button{
      background:rgba(255,255,255,.14); color:#fff; border:1px solid rgba(255,255,255,.25);
      padding:8px 10px; border-radius:10px; cursor:pointer;
    }
    .hud .hint{ opacity:.85; }
    .bigbtn{
      position:absolute; bottom:24px; right:24px; z-index:10;
      background:rgba(255,255,255,.12); color:#fff; border:1px solid rgba(255,255,255,.25);
      padding:14px 16px; border-radius:14px; font-size:18px; cursor:pointer;
    }
  </style>
</head>
<body>

  <!-- 1. img_01_intro.png -->
  <section class="slide" data-type="image">
    <img src="media/img_01_intro.png" alt="Intro">
  </section>

  <!-- 2. vid_01_intro.mp4 -->
  <section class="slide" data-type="video">
    <video src="media/vid_01_intro.mp4" playsinline muted preload="auto"></video>
    <button class="bigbtn" data-action="play">▶ Lancer la vidéo</button>
  </section>

  <!-- 3. img_02_preparation_vote_1.png -->
  <section class="slide" data-type="image">
    <img src="media/img_02_preparation_vote_1.png" alt="Préparation vote 1">
  </section>

  <!-- 4. vote.html?vote=1 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=1"></iframe>
  </section>

  <!-- 5. img_03_preparation_vote_2.png -->
  <section class="slide" data-type="image">
    <img src="media/img_03_preparation_vote_2.png" alt="Préparation vote 2">
  </section>

  <!-- 6. vote.html?vote=2 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=2"></iframe>
  </section>

  <!-- 7. img_04_preparation_vote_3.png -->
  <section class="slide" data-type="image">
    <img src="media/img_04_preparation_vote_3.png" alt="Préparation vote 3">
  </section>

  <!-- 8. vote.html?vote=3 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=3"></iframe>
  </section>

  <!-- 9. img_05_preparation_vote_4.png -->
  <section class="slide" data-type="image">
    <img src="media/img_05_preparation_vote_4.png" alt="Préparation vote 4">
  </section>

  <!-- 10. vote.html?vote=4 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=4"></iframe>
  </section>

  <!-- 11. vid_02_centrale.mp4 -->
  <section class="slide" data-type="video">
    <video src="media/vid_02_centrale.mp4" playsinline muted preload="auto"></video>
    <button class="bigbtn" data-action="play">▶ Lancer la vidéo</button>
  </section>

  <!-- 12. img_06_nicolas_01.jpeg -->
  <section class="slide" data-type="image">
    <img src="media/img_06_nicolas_01.jpeg" alt="Nicolas 1">
  </section>

  <!-- 13. img_07_nicolas_02.jpeg -->
  <section class="slide" data-type="image">
    <img src="media/img_07_nicolas_02.jpeg" alt="Nicolas 2">
  </section>

  <!-- 14. img_08_preparation_vote_5.png -->
  <section class="slide" data-type="image">
    <img src="media/img_08_preparation_vote_5.png" alt="Préparation vote 5">
  </section>

  <!-- 15. vote.html?vote=5 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=5"></iframe>
  </section>

  <!-- 16. img_09_preparation_vote_6.png -->
  <section class="slide" data-type="image">
    <img src="media/img_09_preparation_vote_6.png" alt="Préparation vote 6">
  </section>

  <!-- 17. vote.html?vote=6 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=6"></iframe>
  </section>

  <!-- 18. img_10_preparation_vote_7.png -->
  <section class="slide" data-type="image">
    <img src="media/img_10_preparation_vote_7.png" alt="Préparation vote 7">
  </section>

  <!-- 19. vote.html?vote=7 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=7"></iframe>
  </section>

  <!-- 20. img_11_preparation_vote_8.png -->
  <section class="slide" data-type="image">
    <img src="media/img_11_preparation_vote_8.png" alt="Préparation vote 8">
  </section>

  <!-- 21. vote.html?vote=8 -->
  <section class="slide" data-type="iframe">
    <iframe src="https://frodo1515.github.io/demosvotes/vote.html?vote=8"></iframe>
  </section>

  <!-- 22. vid_03_conclusion.mp4 -->
  <section class="slide" data-type="video">
    <video src="media/vid_03_conclusion.mp4" playsinline muted preload="auto"></video>
    <button class="bigbtn" data-action="play">▶ Lancer la vidéo</button>
  </section>

  <!-- 23. img_12_finale.png -->
  <section class="slide" data-type="image">
    <img src="media/img_12_finale.png" alt="Finale">
  </section>

  <div class="hud">
    <button id="prev">◀</button>
    <button id="next">▶</button>
    <button id="fs">⛶</button>
    <span class="hint">Télécommande: → / ← / PageDown / PageUp / Espace</span>
    <span id="counter"></span>
  </div>

<script>
  const slides = Array.from(document.querySelectorAll('.slide'));
  let i = 0;

  function stopAllVideos(){
    document.querySelectorAll('video').forEach(v => {
      try { v.pause(); v.currentTime = 0; } catch(e) {}
    });
  }

  async function tryAutoPlayMuted(){
    const s = slides[i];
    if(!s) return;
    if(s.dataset.type === 'video'){
      const v = s.querySelector('video');
      if(v){
        v.muted = true;
        try { await v.play(); } catch(e) { /* Autoplay peut être bloqué */ }
      }
    }
  }

  function activate(idx){
    if(idx < 0) idx = 0;
    if(idx >= slides.length) idx = slides.length - 1;

    stopAllVideos();
    slides.forEach(s => s.classList.remove('active'));
    i = idx;
    slides[i].classList.add('active');

    document.getElementById('counter').textContent = `Écran ${i+1}/${slides.length}`;
    tryAutoPlayMuted();
  }

  function next(){ activate(i+1); }
  function prev(){ activate(i-1); }

  document.getElementById('next').addEventListener('click', next);
  document.getElementById('prev').addEventListener('click', prev);

  // Plein écran (bouton ⛶)
  document.getElementById('fs').addEventListener('click', () => {
    const el = document.documentElement;
    if (!document.fullscreenElement) el.requestFullscreen?.();
    else document.exitFullscreen?.();
  });

  // Bouton "Lancer la vidéo" (active le son)
  document.body.addEventListener('click', (e) => {
    const btn = e.target.closest('[data-action="play"]');
    if(!btn) return;
    const s = slides[i];
    const v = s.querySelector('video');
    if(v){ v.muted = false; v.play().catch(()=>{}); }
  });

  // Télécommande/clavier
  window.addEventListener('keydown', (e) => {
    const k = e.key;
    if(k === 'ArrowRight' || k === 'PageDown' || k === ' ' || k === 'Enter'){ e.preventDefault(); next(); }
    if(k === 'ArrowLeft'  || k === 'PageUp'){ e.preventDefault(); prev(); }
  });

  // Init
  activate(0);
</script>
</body>
</html>
